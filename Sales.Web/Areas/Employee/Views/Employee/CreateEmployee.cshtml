@model Sales.Web.Areas.Employee.Models.Employee

@{
    ViewBag.Title = "CreateEmployee";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- BEGIN PAGE HEAD-->
<div class="page-head">
    <div class="container-fluid">
        <!-- BEGIN PAGE TITLE -->
        <div class="page-title">
            <h1>إضافة موظف جديد</h1>
        </div>
        <!-- END PAGE TITLE -->
    </div>
</div>
<!-- END PAGE HEAD-->
<!-- BEGIN PAGE CONTENT BODY -->
<div class="page-content">
    <div class="container-fluid">
        <!-- BEGIN PAGE BREADCRUMBS -->
        <ul class="page-breadcrumb breadcrumb">
            <li>
                <a href="/Employee/Employee/CreateEmployee">إضافة موظف جديد</a>
                <i class="fa fa-circle"></i>
            </li>
            <li>
                <a href="/Employee/Employee/Index">بيانات العاملين</a>
                <i class="fa fa-circle"></i>
            </li>
            <li>
                <span>إدارة العاملين</span>
            </li>
        </ul>
        <!-- END PAGE BREADCRUMBS -->
        <!-- BEGIN PAGE CONTENT INNER -->
        <div class="page-content-inner">
            <div class="portlet light">
                <!-- BEGIN FORM-->
                <form action="#" id="postForm" role="form">
                    <div class="form-body">
                        <!-- <div class="container"> -->
                        <div class="row">
                            <div class="col-lg-3 col-md-6 col-sm-6">
                                <div class="form-group">
                                    <label class="control-label"></label>
                                    نوع الموظف
                                    <span class="required"> * </span>
                                    <div class="icheck-inline margin-top-15">
                                        <label>
                                            <input type="radio" name="Is_Sales_Person" value="true" id="salesMan" class="icheck" data-radio="iradio_square-blue">
                                            مندوب
                                        </label>
                                        <label>
                                            <input type="radio" name="Is_Sales_Person" id="debugger;"  value="false" class="icheck" data-radio="iradio_square-blue" checked>
                                            موظف إداري
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-3 col-md-6 col-sm-6">
                                <div class="alert alert-danger display-hide">
                                    <button class="close" data-close="alert"></button> You have some form errors. Please
                                    check below.
                                </div>
                                <div class="alert alert-success display-hide">
                                    <button class="close" data-close="alert"></button> Your form validation is successful!
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-md-6 col-sm-6">
                                <div class="form-group">
                                    <label class="control-label ">
                                        اسم الموظف
                                        <span class="required"> * </span>
                                    </label>
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <input type="text" data-required="1" value="" class="form-control input-medium" name="Name" required />
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-6">
                                <div class="form-group">
                                    <label class="control-label">
                                        كود الموظف
                                        <span class="required"> * </span>
                                    </label>
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <input type="text" name="Code" data-required="1" value=""
                                               class="form-control input-medium" required />
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-6">
                                <div class="form-group">
                                    <label class="control-label">
                                        رقم الهاتف
                                        <span class="required"> * </span>
                                    </label>
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <input type="tel" value="" name="Mobile" class="form-control input-medium" required />
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-6 ">
                                <div class="form-group">
                                    <label class="control-label">العنوان</label>
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <input type="text" value="" name="Address" class="form-control input-medium" required />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">

                            <div class="col-lg-3 col-md-6 col-sm-6">
                                <div class="form-group">
                                    <label class="control-label">الرقم القومي</label>
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <input type="text" value="" name="NID" class="form-control input-medium" required />
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-3 col-md-6 col-sm-6">
                                <div class="form-group">
                                    <label class="control-label">تاريخ الميلاد</label>
                                    <div class="input-icon right">
                                        <input class="form-control input-medium date-picker" name="BirthDate" size="16" type="text" value="" required />
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-6">
                                <div class="form-group">
                                    <label class="control-label">تاريخ التعيين</label>
                                    <div class="input-icon right">
                                        <input class="form-control input-medium date-picker" name="HireDate" size="16" type="text" value="" required />
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-3 col-md-6 col-sm-6">
                                <div class="form-group">
                                    <label for="single" class="control-label">فعال</label>
                                    <select id="single" class="form-control input-medium" name="Active">
                                        <option value="true">فعال</option>
                                        <option value="false">غير فعال</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-md-6 col-sm-6">
                                <div class="form-group">
                                    <label for="single" class="control-label">الوظيفة</label>
                                    <select id="single" class="form-control input-medium" required >
                                        <option value="job1">وظيفة 1</option>
                                        <option value="job2">وظيفة 2</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <hr>
                        <div id="salesManData" class="hide">
                            <h3>بيانات خاصة بالمندوب</h3>
                            <div class="row">
                                <div class="col-lg-3 col-md-6 col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label">
                                            الحد الاقصي للبيع
                                            <span class="required"> * </span>
                                        </label>
                                        <div class="input-icon right">
                                            <i class="fa"></i>
                                            <input type="number" name="SellingLimit" class="form-control input-medium" min="0" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label">
                                            الخد الاقصي للتحصيل
                                            <span class="required"> * </span>
                                        </label>
                                        <div class="input-icon right">
                                            <i class="fa"></i>
                                            <input type="text" value="" name="CollectionLimit" class="form-control input-medium" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label">
                                            الخد الاقصي للمديونية
                                            <span class="required"> * </span>
                                        </label>
                                        <div class="input-icon right">
                                            <i class="fa"></i>
                                            <input type="text" value="" name="DeptValue" class="form-control input-medium" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-6">
                                    <div class="form-group">
                                        <label for="single" class="control-label">طريقة البيع</label>
                                        <select id="single" name="SellingMethod_Id" class="form-control input-medium">
                                            <option value="3">نقدي او أجل</option>
                                            <option value="1">نقدي </option>
                                            <option value="2">اجل </option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-3 col-md-6 col-sm-6">
                                    <div class="form-group">
                                        <label for="single" class="control-label">صلاحيات المندوب</label>
                                        <select id="single" name="FlagPermission" class="form-control input-medium">
                                            <option value="0">جميع الصلاحيات</option>
                                            <option value="1">بيع فقط</option>
                                            <option value="2">تحصيل فقط</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label">
                                            هدف الزيارات الشهري
                                            <span class="required"> * </span>
                                        </label>
                                        <div class="input-icon right">
                                            <i class="fa"></i>
                                            <input type="text" value="" name="TargetVisits" class="form-control input-medium" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-6">
                                    <div class="form-group">
                                        <label for="single" class="control-label">استخدام الموقع</label>
                                        <i class=" icon-question font-blue" data-title="فتح الزيارة للمندوب في نطاق موقع العميل ">
                                        </i>
                                        <select id="single" class="form-control input-medium" name="Use_Gps">
                                            <option value="true">نعم</option>
                                            <option value="false">لا</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container-fluid">
                        <div class="form-actions">
                            <div class="row">
                                <div class="col">
                                    <button type="submit" id="btnsubmit" class="btn green">إضافة</button>
                                    <button type="button" class="btn red">إلغاء</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <!-- END FORM-->
            </div>
        </div>
        <!-- END PAGE CONTENT INNER -->
    </div>
</div>
<!-- END PAGE CONTENT BODY -->
@section Scripts{
    <script src="~/assets/scripts/pages/form-validation.min.js"></script>
    <script src="~/assets/scripts/pages/components-date-time-pickers.min.js"></script>
    <script src="~/Areas/Employee/scripts/CreateNewEmployee.js"></script>

    <script>
        var api_url = '@System.Configuration.ConfigurationManager.AppSettings["api_url"]';
        $('#btnsubmit').on('click', function () {
            var valdata = $("#postForm").serialize();
            $.post(api_url + 'Employee/Add', valdata, function (res) {
                debugger;
                if (res.StatusCode == 200) {
                    alert(res.ArabicMessage);
                } else {
                    alert(res.ArabicMessage);
                }

            });
        });

        //fetch(api_url + 'Employee/Add', { method: 'POST', redirect: 'follow' })
        //    .then(response => {
        //        if (res.StatusCode == 200) {
        //            alert(res.ArabicMessage);
        //        } else {
        //            alert(res.ArabicMessage);
        //        }
        //    })
        //    .catch(function (err) {
        //        console.info(err);
        //    });
    </script>
}


